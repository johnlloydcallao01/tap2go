(()=>{var e={};e.id=680,e.ids=[680,8010],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8010:(e,t,r)=>{"use strict";r.d(t,{db:()=>p});var s=r(89579),a=r(50784),i=r(58328),n=r(71818);r(18578);let o={apiKey:"AIzaSyB6ALvnN6aX0DMVhePhkUow9VrPauBCqgQ",authDomain:"tap2go-kuucn.firebaseapp.com",projectId:"tap2go-kuucn",storageBucket:"tap2go-kuucn.firebasestorage.app",messagingSenderId:"828629511294",appId:"1:828629511294:web:fae32760ca3c3afcb87c2f"},u=Object.entries(o).filter(([,e])=>!e).map(([e])=>e);if(u.length>0)throw Error(`Missing Firebase environment variables: ${u.join(", ")}`);let d={apiKey:o.apiKey,authDomain:o.authDomain,projectId:o.projectId,storageBucket:o.storageBucket,messagingSenderId:o.messagingSenderId,appId:o.appId},c=(0,s.Wp)(d);(0,a.xI)(c);let p=(0,i.aU)(c);(0,n.c7)(c)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},22022:(e,t,r)=>{"use strict";r.d(t,{Ou:()=>n,Vh:()=>d,g2:()=>o,re:()=>u,xk:()=>i});var s=r(58328),a=r(8010);let i=async(e=20,t)=>{let r=(0,s.P)((0,s.collection)(a.db,"restaurants"),(0,s.My)("featured","desc"),(0,s.My)("rating","desc"),(0,s.AB)(e));t&&(r=(0,s.P)(r,(0,s.HM)(t)));let i=await (0,s.getDocs)(r);return{restaurants:i.docs.map(e=>{let t=e.data();return{id:e.id,name:t.outletName||t.name||"",description:t.description||"",image:t.coverImageUrl||t.image||"",coverImage:t.coverImageUrl||t.image||"",cuisine:t.cuisineTags||t.cuisine||[],address:t.address||{},phone:t.outletPhone||t.phone||"",email:t.email||"",ownerId:t.vendorRef||t.ownerId||"",rating:t.avgRating||t.rating||0,reviewCount:t.totalReviews||t.reviewCount||0,deliveryTime:t.estimatedDeliveryRange||t.deliveryTime||"N/A",deliveryFee:t.deliveryFees?.base||t.deliveryFee||0,minimumOrder:t.minOrderValue||t.minimumOrder||0,isOpen:void 0!==t.isAcceptingOrders?t.isAcceptingOrders:void 0===t.isOpen||t.isOpen,openingHours:t.operatingHours||t.openingHours||{},featured:t.featured||!1,status:t.platformStatus||t.status||"active",commissionRate:t.commissionRate||15,totalOrders:t.totalOrders||0,totalRevenue:t.totalRevenue||0,averagePreparationTime:t.preparationTime?.average||t.averagePreparationTime||20,createdAt:t.createdAt?.toDate?.()||new Date,updatedAt:t.updatedAt?.toDate?.()||new Date}}),lastDoc:i.docs[i.docs.length-1],hasMore:i.docs.length===e}},n=async e=>{let t=(0,s.H9)(a.db,"restaurants",e),r=await (0,s.x7)(t);if(r.exists()){let e=r.data();return{id:r.id,name:e.outletName||e.name||"",description:e.description||"",image:e.coverImageUrl||e.image||"",coverImage:e.coverImageUrl||e.image||"",cuisine:e.cuisineTags||e.cuisine||[],address:e.address||{},phone:e.outletPhone||e.phone||"",email:e.email||"",ownerId:e.vendorRef||e.ownerId||"",rating:e.avgRating||e.rating||0,reviewCount:e.totalReviews||e.reviewCount||0,deliveryTime:e.estimatedDeliveryRange||e.deliveryTime||"N/A",deliveryFee:e.deliveryFees?.base||e.deliveryFee||0,minimumOrder:e.minOrderValue||e.minimumOrder||0,isOpen:void 0!==e.isAcceptingOrders?e.isAcceptingOrders:void 0===e.isOpen||e.isOpen,openingHours:e.operatingHours||e.openingHours||{},featured:e.featured||!1,status:e.platformStatus||e.status||"active",commissionRate:e.commissionRate||15,totalOrders:e.totalOrders||0,totalRevenue:e.totalRevenue||0,averagePreparationTime:e.preparationTime?.average||e.averagePreparationTime||20,createdAt:e.createdAt?.toDate?.()||new Date,updatedAt:e.updatedAt?.toDate?.()||new Date}}return null},o=async e=>(await (0,s.gS)((0,s.collection)(a.db,"restaurants"),{...e,createdAt:new Date,updatedAt:new Date})).id,u=async(e,t)=>{let r=(0,s.H9)(a.db,"restaurants",e);await (0,s.mZ)(r,{...t,updatedAt:new Date})},d=async(e,t)=>{let r=(0,s.P)((0,s.collection)(a.db,"restaurants"));t&&(r=(0,s.P)(r,(0,s._M)("cuisine","array-contains",t)));let i=(await (0,s.getDocs)(r)).docs.map(e=>{let t=e.data();return{id:e.id,name:t.outletName||t.name||"",description:t.description||"",image:t.coverImageUrl||t.image||"",coverImage:t.coverImageUrl||t.image||"",cuisine:t.cuisineTags||t.cuisine||[],address:t.address||{},phone:t.outletPhone||t.phone||"",email:t.email||"",ownerId:t.vendorRef||t.ownerId||"",rating:t.avgRating||t.rating||0,reviewCount:t.totalReviews||t.reviewCount||0,deliveryTime:t.estimatedDeliveryRange||t.deliveryTime||"N/A",deliveryFee:t.deliveryFees?.base||t.deliveryFee||0,minimumOrder:t.minOrderValue||t.minimumOrder||0,isOpen:void 0!==t.isAcceptingOrders?t.isAcceptingOrders:void 0===t.isOpen||t.isOpen,openingHours:t.operatingHours||t.openingHours||{},featured:t.featured||!1,status:t.platformStatus||t.status||"active",commissionRate:t.commissionRate||15,totalOrders:t.totalOrders||0,totalRevenue:t.totalRevenue||0,averagePreparationTime:t.preparationTime?.average||t.averagePreparationTime||20,createdAt:t.createdAt?.toDate?.()||new Date,updatedAt:t.updatedAt?.toDate?.()||new Date}});return e?i.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||t.cuisine.some(t=>t.toLowerCase().includes(e.toLowerCase()))):i}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},40961:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>l,serverHooks:()=>v,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{DELETE:()=>p,GET:()=>d,PUT:()=>c});var a=r(96559),i=r(48088),n=r(37719),o=r(32190),u=r(22022);async function d(e,{params:t}){try{let{id:e}=await t;if(!e)return o.NextResponse.json({success:!1,error:"Restaurant ID is required"},{status:400});let r=await (0,u.Ou)(e);if(!r)return o.NextResponse.json({success:!1,error:"Restaurant not found"},{status:404});return o.NextResponse.json({success:!0,data:r,timestamp:new Date().toISOString()})}catch(e){return console.error("Restaurant detail GET error:",e),o.NextResponse.json({success:!1,error:"Failed to fetch restaurant details",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function c(e,{params:t}){try{let{id:r}=await t,s=await e.json();if(!r)return o.NextResponse.json({success:!1,error:"Restaurant ID is required"},{status:400});await (0,u.re)(r,s);let a=await (0,u.Ou)(r);return o.NextResponse.json({success:!0,message:"Restaurant updated successfully",data:a})}catch(e){return console.error("Restaurant PUT error:",e),o.NextResponse.json({success:!1,error:"Failed to update restaurant",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function p(e,{params:t}){try{let{id:e}=await t;if(!e)return o.NextResponse.json({success:!1,error:"Restaurant ID is required"},{status:400});await (0,u.re)(e,{status:"inactive"});let r=await (0,u.Ou)(e);return o.NextResponse.json({success:!0,message:"Restaurant deleted successfully",data:r})}catch(e){return console.error("Restaurant DELETE error:",e),o.NextResponse.json({success:!1,error:"Failed to delete restaurant",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/restaurants/[id]/route",pathname:"/api/restaurants/[id]",filename:"route",bundlePath:"app/api/restaurants/[id]/route"},resolvedPagePath:"C:\\Users\\ACER\\Desktop\\tap2go\\apps\\web\\src\\app\\api\\restaurants\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:g,serverHooks:v}=l;function w(){return(0,n.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:g})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,580,8328,1054],()=>r(40961));module.exports=s})();