(()=>{var e={};e.id=3957,e.ids=[3957],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5215:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{patchFetch:()=>u,routeModule:()=>d,serverHooks:()=>f,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>l});var o=t(96559),n=t(48088),i=t(37719),a=t(8139),c=e([a]);a=(c.then?(await c)():c)[0];let d=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/test-fcm-notification/route",pathname:"/api/test-fcm-notification",filename:"route",bundlePath:"app/api/test-fcm-notification/route"},resolvedPagePath:"C:\\Users\\ACER\\Desktop\\tap2go\\apps\\web\\src\\app\\api\\test-fcm-notification\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:p,workUnitAsyncStorage:l,serverHooks:f}=d;function u(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:l})}s()}catch(e){s(e)}})},8139:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{POST:()=>a});var o=t(32190),n=t(9801),i=e([n]);async function a(e){try{let r,{userId:t,type:s="test_notification"}=await e.json();if(!t)return o.NextResponse.json({error:"User ID is required"},{status:400});switch(s){case"payment_success":r={title:"\uD83D\uDCB0 Payment Successful!",body:"Your payment of ₱20.00 has been processed successfully."};break;case"order_confirmed":r={title:"✅ Order Confirmed",body:"Your order has been confirmed and is being prepared."};break;case"order_preparing":r={title:"\uD83D\uDC68‍\uD83C\uDF73 Order Being Prepared",body:"Your delicious meal is being prepared by the chef!"};break;case"order_ready":r={title:"\uD83C\uDF7D️ Order Ready",body:"Your order is ready for pickup or delivery!"};break;case"driver_assigned":r={title:"\uD83D\uDE97 Driver Assigned",body:"Juan is on the way to deliver your order!"};break;case"order_delivered":r={title:"\uD83C\uDF89 Order Delivered",body:"Your order has been delivered. Enjoy your meal!"};break;case"payment_failed":r={title:"❌ Payment Failed",body:"Your payment could not be processed. Please try again."};break;default:r={title:"\uD83D\uDD14 Test Notification",body:"This is a test notification from Tap2Go FCM system."}}try{let e={successCount:1,failureCount:0};return console.log("Test FCM notification sent:",{userId:t,type:s,successCount:e.successCount,failureCount:e.failureCount}),o.NextResponse.json({success:!0,message:"Test notification sent successfully",details:{userId:t,type:s,notification:r,successCount:e.successCount,failureCount:e.failureCount},note:"This is a test endpoint. In production, real FCM tokens would be used."})}catch(e){return console.error("FCM sending error:",e),o.NextResponse.json({success:!1,error:"Failed to send FCM notification",details:e.message||"Unknown FCM error",note:"This might be expected in testing without real FCM tokens."})}}catch(e){return console.error("Error in test FCM notification:",e),o.NextResponse.json({error:"Internal server error",message:e.message||"Unknown error occurred"},{status:500})}}n=(i.then?(await i)():i)[0],(0,n.getApps)().length||(0,n.initializeApp)({credential:(0,n.cert)({projectId:process.env.FIREBASE_ADMIN_PROJECT_ID,clientEmail:process.env.FIREBASE_ADMIN_CLIENT_EMAIL,privateKey:process.env.FIREBASE_ADMIN_PRIVATE_KEY.replace(/\\n/g,"\n")})}),s()}catch(e){s(e)}})},9801:e=>{"use strict";e.exports=import("firebase-admin/app")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580],()=>t(5215));module.exports=s})();