"use strict";(()=>{var e={};e.id=3224,e.ids=[3224],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},11997:e=>{e.exports=require("punycode")},27910:e=>{e.exports=require("stream")},28416:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{DELETE:()=>p,GET:()=>u,PUT:()=>l});var i=t(96559),a=t(48088),o=t(37719),n=t(32190),d=t(81234);async function u(e,{params:r}){try{let e=parseInt(r.id);if(isNaN(e))return n.NextResponse.json({error:"Invalid media file ID"},{status:400});let t=d.H.getInstance(),s=await t.getMediaFileById(e);if(!s)return n.NextResponse.json({error:"Media file not found"},{status:404});return n.NextResponse.json({success:!0,data:s})}catch(r){console.error("Error fetching media file:",r);let e=r instanceof Error?r.message:"Failed to fetch media file";return n.NextResponse.json({error:"Fetch failed",message:e},{status:500})}}async function l(e,{params:r}){try{let t=parseInt(r.id);if(isNaN(t))return n.NextResponse.json({error:"Invalid media file ID"},{status:400});let{alt_text:s,caption:i,description:a,title:o,visibility:u}=await e.json();if(u&&!["public","private","restricted"].includes(u))return n.NextResponse.json({error:"Invalid visibility value"},{status:400});let l={...void 0!==s&&{alt_text:s},...void 0!==i&&{caption:i},...void 0!==a&&{description:a},...void 0!==o&&{title:o},...void 0!==u&&{visibility:u}};if(0===Object.keys(l).length)return n.NextResponse.json({error:"No valid fields to update"},{status:400});let p=d.H.getInstance(),c=await p.updateMediaFile(t,l);return n.NextResponse.json({success:!0,message:"Media file updated successfully",data:c})}catch(r){console.error("Error updating media file:",r);let e=r instanceof Error?r.message:"Failed to update media file";return n.NextResponse.json({error:"Update failed",message:e},{status:500})}}async function p(e,{params:r}){try{let t,s,i=parseInt(r.id);if(isNaN(i))return n.NextResponse.json({error:"Invalid media file ID"},{status:400});let{searchParams:a}=new URL(e.url),o=a.get("user_id"),u="true"===a.get("hard_delete");if(!o)return n.NextResponse.json({error:"user_id is required for deletion"},{status:400});let l=d.H.getInstance();if(u?(t=await l.hardDeleteMediaFile(i,o),s="Media file permanently deleted successfully"):(t=await l.deleteMediaFile(i,o),s="Media file deleted successfully"),!t)return n.NextResponse.json({error:"Failed to delete media file"},{status:500});return n.NextResponse.json({success:!0,message:s,hard_delete:u})}catch(r){console.error("Error deleting media file:",r);let e=r instanceof Error?r.message:"Failed to delete media file";return n.NextResponse.json({error:"Delete failed",message:e},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/media/files/[id]/route",pathname:"/api/media/files/[id]",filename:"route",bundlePath:"app/api/media/files/[id]/route"},resolvedPagePath:"C:\\Users\\ACER\\Desktop\\tap2go\\apps\\web\\src\\app\\api\\media\\files\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:x,serverHooks:m}=c;function g(){return(0,o.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:x})}},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},81630:e=>{e.exports=require("http")},91645:e=>{e.exports=require("net")},94735:e=>{e.exports=require("events")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580,4202,3259],()=>t(28416));module.exports=s})();