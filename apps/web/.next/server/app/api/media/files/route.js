"use strict";(()=>{var e={};e.id=2018,e.ids=[2018],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},11997:e=>{e.exports=require("punycode")},27910:e=>{e.exports=require("stream")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49672:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>u,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var i={};r.r(i),r.d(i,{GET:()=>n});var s=r(96559),o=r(48088),a=r(37719),p=r(32190),d=r(81234);async function n(e){try{let{searchParams:t}=new URL(e.url),r={query:t.get("query")||void 0,folder_id:t.get("folder_id")?parseInt(t.get("folder_id")):void 0,file_type:t.get("file_type")||void 0,mime_type:t.get("mime_type")||void 0,tags:t.get("tags")?.split(",").filter(Boolean)||void 0,status:t.get("status")||void 0,visibility:t.get("visibility")||void 0,uploaded_by:t.get("uploaded_by")||void 0,date_from:t.get("date_from")||void 0,date_to:t.get("date_to")||void 0,min_size:t.get("min_size")?parseInt(t.get("min_size")):void 0,max_size:t.get("max_size")?parseInt(t.get("max_size")):void 0,is_used:t.get("is_used")?"true"===t.get("is_used"):void 0},i={page:t.get("page")?parseInt(t.get("page")):1,limit:t.get("limit")?parseInt(t.get("limit")):20,sort_by:t.get("sort_by")||"created_at",sort_order:t.get("sort_order")||"desc"};i.page<1&&(i.page=1),(i.limit<1||i.limit>100)&&(i.limit=20);let s=d.H.getInstance(),o=await s.getMediaFiles(r,i);return p.NextResponse.json({success:!0,data:o.data,pagination:{total:o.total,page:o.page,limit:o.limit,pages:Math.ceil(o.total/o.limit)}})}catch(t){console.error("Error fetching media files:",t);let e=t instanceof Error?t.message:"Failed to fetch media files";return p.NextResponse.json({error:"Fetch failed",message:e},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/media/files/route",pathname:"/api/media/files",filename:"route",bundlePath:"app/api/media/files/route"},resolvedPagePath:"C:\\Users\\ACER\\Desktop\\tap2go\\apps\\web\\src\\app\\api\\media\\files\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:m}=u;function x(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},81630:e=>{e.exports=require("http")},91645:e=>{e.exports=require("net")},94735:e=>{e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[4447,580,4202,3259],()=>r(49672));module.exports=i})();