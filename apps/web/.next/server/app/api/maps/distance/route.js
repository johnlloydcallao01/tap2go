"use strict";(()=>{var e={};e.id=623,e.ids=[623],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54966:(e,s,t)=>{t.r(s),t.d(s,{patchFetch:()=>j,routeModule:()=>f,serverHooks:()=>R,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var r={};t.r(r),t.d(r,{GET:()=>p,OPTIONS:()=>N,POST:()=>l,PUT:()=>d});var n=t(96559),a=t(48088),o=t(37719),i=t(32190),u=t(58430),c=t(59506);async function l(e){try{let{origin:s,destination:t,includeDeliveryInfo:r=!1,restaurantRadius:n}=await e.json();if(!s||!t)return i.NextResponse.json({success:!1,error:"Origin and destination coordinates are required"},{status:400});if(!g(s)||!g(t))return i.NextResponse.json({success:!1,error:"Invalid coordinate format. Expected {lat: number, lng: number}"},{status:400});if(!(0,c.Du)(s)||!(0,c.Du)(t))return i.NextResponse.json({success:!1,error:"Coordinates must be within Philippines"},{status:400});if(r){let e=await (0,u.Rp)(s,t,n);return i.NextResponse.json({success:!0,data:e,message:"Delivery information calculated successfully"},{status:200})}{let e=await (0,u.gd)(s,t);return i.NextResponse.json({success:!0,data:[e],message:"Distance calculated successfully"},{status:200})}}catch(e){if(console.error("Distance calculation API error:",e),e&&"object"==typeof e&&"code"in e)return i.NextResponse.json({success:!1,error:e.message,details:e.details},{status:"NOT_FOUND"===e.code?404:"INVALID_REQUEST"===e.code?400:500});return i.NextResponse.json({success:!1,error:"Internal server error during distance calculation"},{status:500})}}async function d(e){try{let{origin:s,destinations:t}=await e.json();if(!s||!t||!Array.isArray(t))return i.NextResponse.json({success:!1,error:"Origin coordinate and destinations array are required"},{status:400});if(0===t.length)return i.NextResponse.json({success:!1,error:"At least one destination is required"},{status:400});if(t.length>25)return i.NextResponse.json({success:!1,error:"Maximum 25 destinations allowed per request"},{status:400});if(!g(s))return i.NextResponse.json({success:!1,error:"Invalid origin coordinate format"},{status:400});if(!(0,c.Du)(s))return i.NextResponse.json({success:!1,error:"Origin must be within Philippines"},{status:400});for(let e=0;e<t.length;e++){let s=t[e];if(!g(s))return i.NextResponse.json({success:!1,error:`Invalid coordinate format for destination ${e+1}`},{status:400});if(!(0,c.Du)(s))return i.NextResponse.json({success:!1,error:`Destination ${e+1} must be within Philippines`},{status:400})}let r=await (0,u.HR)(s,t);return i.NextResponse.json({success:!0,data:r,message:"Distance matrix calculated successfully"},{status:200})}catch(e){if(console.error("Distance matrix API error:",e),e&&"object"==typeof e&&"code"in e)return i.NextResponse.json({success:!1,error:e.message,details:e.details},{status:"NOT_FOUND"===e.code?404:"INVALID_REQUEST"===e.code?400:500});return i.NextResponse.json({success:!1,error:"Internal server error during distance matrix calculation"},{status:500})}}async function p(e){try{let{searchParams:s}=new URL(e.url),t=s.get("origin_lat"),r=s.get("origin_lng"),n=s.get("dest_lat"),a=s.get("dest_lng"),o=s.get("radius");if(!t||!r||!n||!a)return i.NextResponse.json({success:!1,error:"Origin and destination coordinates are required (origin_lat, origin_lng, dest_lat, dest_lng)"},{status:400});let l={lat:parseFloat(t),lng:parseFloat(r)},d={lat:parseFloat(n),lng:parseFloat(a)};if(isNaN(l.lat)||isNaN(l.lng)||isNaN(d.lat)||isNaN(d.lng))return i.NextResponse.json({success:!1,error:"Invalid coordinate format"},{status:400});if(!(0,c.Du)(l)||!(0,c.Du)(d))return i.NextResponse.json({success:!1,error:"Coordinates must be within Philippines"},{status:400});let p=o?parseFloat(o):void 0;if(void 0!==p&&(isNaN(p)||p<=0||p>50))return i.NextResponse.json({success:!1,error:"Radius must be a positive number between 0 and 50 km"},{status:400});let g=await (0,u.Rp)(l,d,p);return i.NextResponse.json({success:!0,data:g,message:"Delivery fee calculated successfully"},{status:200})}catch(e){if(console.error("Delivery fee calculation API error:",e),e&&"object"==typeof e&&"code"in e)return i.NextResponse.json({success:!1,error:e.message,details:e.details},{status:"NOT_FOUND"===e.code?404:"INVALID_REQUEST"===e.code?400:500});return i.NextResponse.json({success:!1,error:"Internal server error during delivery fee calculation"},{status:500})}}function g(e){return null!==e&&"object"==typeof e&&null!==e&&"lat"in e&&"lng"in e&&"number"==typeof e.lat&&"number"==typeof e.lng&&!isNaN(e.lat)&&!isNaN(e.lng)}async function N(){return new i.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}let f=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/maps/distance/route",pathname:"/api/maps/distance",filename:"route",bundlePath:"app/api/maps/distance/route"},resolvedPagePath:"C:\\Users\\ACER\\Desktop\\tap2go\\apps\\web\\src\\app\\api\\maps\\distance\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:R}=f;function j(){return(0,o.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,580,6770],()=>t(54966));module.exports=r})();